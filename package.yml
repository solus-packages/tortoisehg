name       : tortoisehg
version    : 5.8.1
release    : 8
source     :
    - https://foss.heptapod.net/mercurial/tortoisehg/thg/-/archive/5.8.1/thg-5.8.1.tar.gz : f0abe741950cf059869bd170c6cab92dc1d698a053ec721d66b42a6add3910f2
homepage   : https://tortoisehg.bitbucket.io/
license    : GPL-2.0-only
component  : programming.tools
summary    : TortoiseHg is a series of applications for the Mercurial distributed revision control system
description: |
    TortoiseHg is a series of applications for the Mercurial distributed revision control system.
builddeps  :
    - mercurial
    - python-qscintilla
rundeps    :
    - mercurial
    - python-iniparse
    - python-qscintilla
setup      : |
    sed -i "s|#!/usr/bin/env python|&3|" thg
build      : |
    %python3_setup
install    : |
    %python3_install
    install -Dm00644 icons/scalable/apps/thg.svg $installdir/usr/share/icons/hicolor/scalable/apps/thg.svg
    sed -i "s|thg_logo|thg|" contrib/thg.desktop
    install -Dm00644 contrib/thg.desktop $installdir/usr/share/applications/thg.desktop
    rm -r $installdir/usr/lib/python3.7/site-packages/hgext3rd
    rm -r $installdir/usr/share/doc
